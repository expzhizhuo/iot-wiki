{"remainingRequest":"Z:\\文库\\iot-wiki\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!Z:\\文库\\iot-wiki\\node_modules\\vuepress-theme-antdocs\\components\\PageAnchor.vue?vue&type=script&lang=js&","dependencies":[{"path":"Z:\\文库\\iot-wiki\\node_modules\\vuepress-theme-antdocs\\components\\PageAnchor.vue","mtime":1654681744000},{"path":"Z:\\文库\\iot-wiki\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\文库\\iot-wiki\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"Z:\\文库\\iot-wiki\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\文库\\iot-wiki\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBpbXBvcnQgeyBnZXRMb2NhbFN0b3JhZ2UgfSBmcm9tICcuLi91dGlsL2luZGV4JzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaGVhZGVyc0xpc3Q6IFtdLA0KICAgICAgLy8gaXNDb2xsYXBzZVBhZ2VBbmNob3I6IGZhbHNlDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIGNvbGxhcHNlUGFnZUFuY2hvcigpIHsNCiAgICAvLyAgIHRoaXMuaXNDb2xsYXBzZVBhZ2VBbmNob3IgPSAhdGhpcy5pc0NvbGxhcHNlUGFnZUFuY2hvcjsNCiAgICAvLyAgIHRoaXMuJHN0b3JlLnN0YXRlLmdsb2JhbC5pc0NvbGxhcHNlUGFnZUFuY2hvciA9IHRoaXMuaXNDb2xsYXBzZVBhZ2VBbmNob3I7DQogICAgLy8gICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjsNCiAgICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc0NvbGxhcHNlUGFnZUFuY2hvcicsIHRoaXMuaXNDb2xsYXBzZVBhZ2VBbmNob3IpOw0KICAgIC8vIH0sDQogICAgYXJyYXlUb1RyZWUoYXJyLCBwYXJlbnQpIHsNCiAgICAgIHJldHVybiBhcnIucmVkdWNlKChyZXMsIGN1cnJlbnQpID0+IHsNCiAgICAgICAgaWYgKGN1cnJlbnRbJ3BhcmVudCddID09PSBwYXJlbnQpIHsNCiAgICAgICAgICBjdXJyZW50Lml0ZW1zID0gdGhpcy5hcnJheVRvVHJlZShhcnIsIGN1cnJlbnRbJ2lkJ10pOw0KICAgICAgICAgIHJldHVybiByZXMuY29uY2F0KGN1cnJlbnQpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXM7DQogICAgICB9LCBbXSk7DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGhhc0hlYWRlcnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5oZWFkZXJzRGF0YSA/IHRydWUgOiBmYWxzZTsNCiAgICB9LA0KICAgIGhlYWRlcnNEYXRhKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHBhZ2UuaGVhZGVyczsNCiAgICB9LA0KICAgIHBhZ2VBbmNob3JDb25maWcoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICB0aGlzLiRwYWdlLmZyb250bWF0dGVyLnBhZ2VBbmNob3IgfHwNCiAgICAgICAgdGhpcy4kdGhlbWVDb25maWcucGFnZUFuY2hvciB8fCB7IGFuY2hvckRlcHRoOiAyLCBpc0Rpc2FibGVkOiBmYWxzZSB9DQogICAgICApOw0KICAgIH0sDQogICAgaXNDb2xsYXBzZVBhZ2VBbmNob3IoKXsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5nbG9iYWwuaXNDb2xsYXBzZVBhZ2VBbmNob3INCiAgICB9LA0KICAgIGZpbHRlckhlYWRlcnNCeUxldmVsMigpIHsNCiAgICAgIGNvbnN0IHsgaGVhZGVycyB9ID0gdGhpcy4kcGFnZTsNCiAgICAgIGxldCBoZWFkZXJzTGlzdDsNCiAgICAgIGhlYWRlcnNMaXN0ID0gaGVhZGVycy5maWx0ZXIoaXRlbSA9PiBpdGVtLmxldmVsID09PSAyKTsNCiAgICAgIGhlYWRlcnNMaXN0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGl0ZW1bJ2l0ZW1zJ10gPSBbXTsNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIGhlYWRlcnNMaXN0Ow0KICAgIH0sDQogICAgZmlsdGVySGVhZGVyc0J5TGV2ZWwoKSB7DQogICAgICBpZiAodGhpcy5wYWdlQW5jaG9yQ29uZmlnLmFuY2hvckRlcHRoID09PSAxKSB7DQogICAgICAgIHJldHVybiB0aGlzLmZpbHRlckhlYWRlcnNCeUxldmVsMjsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgeyBoZWFkZXJzIH0gPSB0aGlzLiRwYWdlOw0KICAgICAgbGV0IGhlYWRlcnNMaXN0ID0gaGVhZGVyczsNCiAgICAgIGhlYWRlcnNMaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGl0ZW1bJ2lkJ10gPSBpbmRleCArIDE7DQogICAgICAgIGlmIChpdGVtLmxldmVsID09PSAyKSB7DQogICAgICAgICAgaXRlbVsncGFyZW50J10gPSAwOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkgew0KICAgICAgICAgICAgaWYgKGhlYWRlcnNMaXN0W2luZGV4IC0gMV0ubGV2ZWwgPT09IDIpIHsNCiAgICAgICAgICAgICAgaXRlbVsncGFyZW50J10gPSBoZWFkZXJzTGlzdFtpbmRleCAtIDFdWydpZCddOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJzTGlzdFtpbmRleCAtIDFdLmxldmVsID09PSAzKSB7DQogICAgICAgICAgICAgIGl0ZW1bJ3BhcmVudCddID0gaGVhZGVyc0xpc3RbaW5kZXggLSAxXVsncGFyZW50J107DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIHJldHVybiB0aGlzLmFycmF5VG9UcmVlKGhlYWRlcnNMaXN0LCAwKTsNCiAgICB9DQogIH0sDQogIC8vIG1vdW50ZWQoKSB7DQogIC8vICAgdGhpcy5pc0NvbGxhcHNlUGFnZUFuY2hvciA9IGdldExvY2FsU3RvcmFnZSgNCiAgLy8gICAgICdpc0NvbGxhcHNlUGFnZUFuY2hvcicsDQogIC8vICAgICAnYm9vbGVuJw0KICAvLyAgICk7DQogIC8vIH0NCn07DQo="},{"version":3,"sources":["PageAnchor.vue"],"names":[],"mappings":";AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PageAnchor.vue","sourceRoot":"node_modules/vuepress-theme-antdocs/components","sourcesContent":["<template>\r\n  <div\r\n    :class=\"['page-anchor', { 'collapse-page-anchor': isCollapsePageAnchor }]\"\r\n    v-if=\"hasHeaders\"\r\n  >\r\n\r\n    <a-space direction=\"vertical\" size=\"large\" style=\"width:100%;\">\r\n      <!-- <a-button @click=\"collapsePageAnchor\" shape=\"circle\">\r\n        <a-icon v-if=\"isCollapsePageAnchor\" type=\"left\" />\r\n        <a-icon v-else type=\"right\" />\r\n      </a-button> -->\r\n\r\n      <a-anchor class=\"page-anchor-offset\">\r\n        <template v-for=\"(item, index) in filterHeadersByLevel\">\r\n          <a-anchor-link\r\n            v-if=\"item['items'].length !== 0\"\r\n            :href=\"'#' + item.slug\"\r\n            :title=\"item.title\"\r\n            :key=\"index\"\r\n          >\r\n            <template v-for=\"(subItem, index) in item['items']\">\r\n              <a-anchor-link\r\n                v-if=\"subItem.level === 3\"\r\n                :href=\"'#' + subItem.slug\"\r\n                :title=\"subItem.title\"\r\n                :key=\"index\"\r\n              />\r\n            </template>\r\n          </a-anchor-link>\r\n\r\n          <a-anchor-link\r\n            v-else\r\n            :href=\"'#' + item.slug\"\r\n            :title=\"item.title\"\r\n            :key=\"index\"\r\n          />\r\n        </template>\r\n      </a-anchor>\r\n    </a-space>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { getLocalStorage } from '../util/index';\r\nexport default {\r\n  data() {\r\n    return {\r\n      headersList: [],\r\n      // isCollapsePageAnchor: false\r\n    };\r\n  },\r\n  methods: {\r\n    // collapsePageAnchor() {\r\n    //   this.isCollapsePageAnchor = !this.isCollapsePageAnchor;\r\n    //   this.$store.state.global.isCollapsePageAnchor = this.isCollapsePageAnchor;\r\n    //   if (typeof localStorage === 'undefined') return;\r\n    //   localStorage.setItem('isCollapsePageAnchor', this.isCollapsePageAnchor);\r\n    // },\r\n    arrayToTree(arr, parent) {\r\n      return arr.reduce((res, current) => {\r\n        if (current['parent'] === parent) {\r\n          current.items = this.arrayToTree(arr, current['id']);\r\n          return res.concat(current);\r\n        }\r\n        return res;\r\n      }, []);\r\n    }\r\n  },\r\n  computed: {\r\n    hasHeaders() {\r\n      return this.headersData ? true : false;\r\n    },\r\n    headersData() {\r\n      return this.$page.headers;\r\n    },\r\n    pageAnchorConfig() {\r\n      return (\r\n        this.$page.frontmatter.pageAnchor ||\r\n        this.$themeConfig.pageAnchor || { anchorDepth: 2, isDisabled: false }\r\n      );\r\n    },\r\n    isCollapsePageAnchor(){\r\n      return this.$store.state.global.isCollapsePageAnchor\r\n    },\r\n    filterHeadersByLevel2() {\r\n      const { headers } = this.$page;\r\n      let headersList;\r\n      headersList = headers.filter(item => item.level === 2);\r\n      headersList.forEach(item => {\r\n        item['items'] = [];\r\n      });\r\n      return headersList;\r\n    },\r\n    filterHeadersByLevel() {\r\n      if (this.pageAnchorConfig.anchorDepth === 1) {\r\n        return this.filterHeadersByLevel2;\r\n      }\r\n\r\n      const { headers } = this.$page;\r\n      let headersList = headers;\r\n      headersList.forEach((item, index) => {\r\n        item['id'] = index + 1;\r\n        if (item.level === 2) {\r\n          item['parent'] = 0;\r\n        } else {\r\n          if (index !== 0) {\r\n            if (headersList[index - 1].level === 2) {\r\n              item['parent'] = headersList[index - 1]['id'];\r\n            } else if (headersList[index - 1].level === 3) {\r\n              item['parent'] = headersList[index - 1]['parent'];\r\n            }\r\n          }\r\n        }\r\n      });\r\n      return this.arrayToTree(headersList, 0);\r\n    }\r\n  },\r\n  // mounted() {\r\n  //   this.isCollapsePageAnchor = getLocalStorage(\r\n  //     'isCollapsePageAnchor',\r\n  //     'boolen'\r\n  //   );\r\n  // }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import '../styles/palette.less';\r\n\r\n.page-anchor {\r\n  width: 12.5rem;\r\n  position: fixed;\r\n  top: @navbarHeight + 3.5rem;\r\n  right: 1.25rem;\r\n  z-index: 999;\r\n  // transition: right 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);\r\n\r\n  .anticon {\r\n    margin-top: -3px;\r\n  }\r\n\r\n  // .ant-anchor-wrapper {\r\n  //   transition: opacity 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);\r\n  // }\r\n\r\n  .page-anchor-offset {\r\n    padding-left: 6px;\r\n    max-height: 15rem;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n// .collapse-page-anchor {\r\n//   right: -10.5rem;\r\n\r\n//   .ant-anchor-wrapper {\r\n//     opacity: 0;\r\n//     visibility: hidden;\r\n//   }\r\n// }\r\n</style>\r\n"]}]}